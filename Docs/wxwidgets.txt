TODO:
- проверить настройки setup.h


Проблемы
~~~~~~~~
1) Собрать библиотеку, используя проекты VisualStudio очень проблематично:
   нужно поменять довольно-таки большое количество настроек сразу в 20
   проектах. Поэтому сборка будет производиться из командной строки, с
   использованием предоставленных makefile-ов.
2) Для debug-сборки конечного приложения необходимо наличие debug dll
   wxWidgets (как минимум, из-за использования разных версий msvcrt в debug
   и release сборках приложения).
3) Сборка с настройками по-умолчанию не содержит поддержки OpenGL canvas.
4) wxWidgets 2.9.1 не может быть слинкована в MONOLITHIC build, linker выдаёт
   ошибку http://support.microsoft.com/kb/831995
   - можно попробовать поотключать разные компоненты в config.vc


Зачистка дистрибутива
~~~~~~~~~~~~~~~~~~~~~
Для экономии места можно удалить в include/wx/ следующие каталоги (служат
для поддержки других платформ):
    cocoa
    dfb
    gtk
    gtk1
    mac
    mgl
    motif
    msdos
    os2
    palmos
    univ
    unix
    x11


Где брать исходники
~~~~~~~~~~~~~~~~~~~
http://www.wxwidgets.org/
  сама библиотека
http://wxpropgrid.sourceforge.net/
  используемый в редакторе компонент PropertyGrid



ИНСТРУКЦИЯ ПО СБОРКЕ WXWIDGETS
==============================

Файлы
~~~~~
config.vc - находится в wxWidgets/build/msw
setup.h   - находится в wxWidgets/include/wx/msw


Изменения в setup.h
~~~~~~~~~~~~~~~~~~~
wxUSE_GLCANVAS = 1
  Включение компиляции компонента OpenGL canvas.
  (wxWidgets 2.9.1: уже включено)


Изменения в config.vc
~~~~~~~~~~~~~~~~~~~~~
LDFLAGS = /debug /opt:ref /opt:icf
  Флажки линкера. "/debug" включает генерацию pdb, а "/opt:..." уменьшает
  размер полученной dll, которая "пухнет" после включения debug.
SHARED = 1
  Включает сборку dll. По умолчанию компилируется статическая библиотека.
BUILD = debug
BUILD = release
  Выбор типа сборки (придётся компилировать оба варианта)
DEBUG_FLAG = 0
  Убирает суффикс "d" у имён dll в debug build.
MONOLITHIC = 1
  Выбор "монолитной" сборки, когда создаётся только одна dll. По умолчанию
  собирается набор из нескольких dll.
UNICODE = 0
  надо проверить - в wxWidgets 2.9.1 сказано, что Unicode работает всегда
USE_MEDIA = 0
USE_QA = 0
USE_RTTI = 0
USE_THREADS = 0
  Уменьшение размера библиотеки (неиспользуемый функционал).
USE_OPENGL = 1
  Включение компиляции компонента OpenGL canvas.
OFFICIAL_BUILD = 1
VENDOR =
  Убирает суффикс с имени dll.

Внимание: некоторые настройки должны быть синхронными между setup.h и config.vc.
Например UNICODE и wxUSE_UNICODE. В противном случае появятся ошибки на этапе
линковки приложения (не библиотеки).


Компиляция
~~~~~~~~~~
Создайте и запустите в каталоге wxWidgets/build/msw bat-файл следующего
содержания:
    call "C:\Program Files\Microsoft Visual Studio 8\VC\bin\vcvars32.bat"
      (здесь должен быть путь к VisualStudio)
    nmake -nologo -s -f makefile.vc
После компиляции создаётся каталог vc_mswdll - в нём содержатся все
obj-файлы, его можно (а для сборки с другими настройками - НУЖНО) удалить.
Скомпилированные библиотеки лежат в каталоге wxWidgets/lib/vc_dll. Отсюда
нужны только файлы wxmsw*.dll, wxmsw*.pdb и wxmsw*.lib.

Внимание: vc32tools --make ... не работает. Возможно, ему надо указать какой-то
ключ (например задать target).

setup.h необходимо скопировать в wx/include.


ИНСТРУКЦИЯ ПО СБОРКЕ PROPGRID
=============================

wxWidgets начиная с версии 2.9 (2.9.1?) содержит "встроенный" PropGrid и отдельная
компиляция не требуется.

Файлы
~~~~~
makefile.vc - находится в wxPropGrig/build


Изменения в makefile.vc
~~~~~~~~~~~~~~~~~~~~~~~
LDFLAGS = /debug /opt:ref /opt:icf
WX_SHARED = 1
WX_DEBUG = 0
WX_MONOLITHIC = 1
  Все изменения аналогичны используемым в config.vc при компиляции wxWidgets
WXLIBPOSTFIX = d
WX3RDPARTYLIBPOSTFIX = d
  Эти строки следует закомментировать (поставить '#' в начале строки) или
  удалить. Это даст возможность использовать dll в debug build без суффикса
  "d".
__WXLIB_BASE_NAME_p = wxmsw28.lib
  То же самое. Везде убрать суффикс "d".


Компиляция
~~~~~~~~~~
Создайте и запустите в каталоге wxPropGrig/build bat-файл следующего
содержания:
    call "C:\Program Files\Microsoft Visual Studio 8\VC\bin\vcvars32.bat"
    nmake -nologo -s -f makefile.vc WXWIN=..\..\wxWidgets
Здесь значение переменной WXWIN задаёт путь к установленной wxWidgets (нужны
только заголовочные файлы и lib-ы).
После компиляции создаются каталоги аналогично компиляции базовой библиотеки.
Нужны следующие файлы:
    wxcode_msw*_propgrid.dll
    wxcode_msw*_propgrid.lib
    wxcode_msw*_propgrid.pdb

Дополнения
~~~~~~~~~~
27.10.2010
При компиляции нового propgrid со старым wxWidgets надо заменить в propgrid.h
WXDLLIMPEXP_FWD_CORE на WXDLLIMPEXP_CORE.
